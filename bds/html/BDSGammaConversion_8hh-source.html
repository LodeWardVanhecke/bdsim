<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BDS: include/BDSGammaConversion.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a></div>
<h1>BDSGammaConversion.hh</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/* BDSIM code.    Version 1.0</span>
00002 <span class="comment">   Author: Grahame A. Blair, Royal Holloway, Univ. of London.</span>
00003 <span class="comment">   Last modified 1.11.2002</span>
00004 <span class="comment">   Copyright (c) 2002 by G.A.Blair.  ALL RIGHTS RESERVED. </span>
00005 <span class="comment">*/</span>
00006 <span class="comment">//</span>
00007 <span class="comment">// ********************************************************************</span>
00008 <span class="comment">// * DISCLAIMER                                                       *</span>
00009 <span class="comment">// *                                                                  *</span>
00010 <span class="comment">// * The following disclaimer summarizes all the specific disclaimers *</span>
00011 <span class="comment">// * of contributors to this software. The specific disclaimers,which *</span>
00012 <span class="comment">// * govern, are listed with their locations in:                      *</span>
00013 <span class="comment">// *   http://cern.ch/geant4/license                                  *</span>
00014 <span class="comment">// *                                                                  *</span>
00015 <span class="comment">// * Neither the authors of this software system, nor their employing *</span>
00016 <span class="comment">// * institutes,nor the agencies providing financial support for this *</span>
00017 <span class="comment">// * work  make  any representation or  warranty, express or implied, *</span>
00018 <span class="comment">// * regarding  this  software system or assume any liability for its *</span>
00019 <span class="comment">// * use.                                                             *</span>
00020 <span class="comment">// *                                                                  *</span>
00021 <span class="comment">// * This  code  implementation is the  intellectual property  of the *</span>
00022 <span class="comment">// * GEANT4 collaboration.                                            *</span>
00023 <span class="comment">// * By copying,  distributing  or modifying the Program (or any work *</span>
00024 <span class="comment">// * based  on  the Program)  you indicate  your  acceptance of  this *</span>
00025 <span class="comment">// * statement, and all its terms.                                    *</span>
00026 <span class="comment">// ********************************************************************</span>
00027 <span class="comment">//</span>
00028 <span class="comment">//</span>
00029 <span class="comment">// $Id: BDSGammaConversion.hh,v 1.1.1.1 2004/11/18 17:42:40 ilia Exp $</span>
00030 <span class="comment">// GEANT4 tag $Name:  $</span>
00031 <span class="comment">//</span>
00032 <span class="comment">//------------------ BDSGammaConversion physics process -------------------------</span>
00033 <span class="comment">//                   by Michel Maire, 24 May 1996</span>
00034 <span class="comment">//</span>
00035 <span class="comment">// 11-06-96, Added GetRandomAtom() method and new data member</span>
00036 <span class="comment">//           for cumulative total cross section, by M.Maire</span>
00037 <span class="comment">// 21-06-96, SetCuts inplementation, M.Maire</span>
00038 <span class="comment">// 16-09-96, Dynamical array PartialSumSigma, M.Maire</span>
00039 <span class="comment">// 14-01-97, crossection table + meanfreepath table.</span>
00040 <span class="comment">//           PartialSumSigma removed, M.Maire</span>
00041 <span class="comment">// 14-03-97, new physics scheme for geant4alpha, M.Maire</span>
00042 <span class="comment">// 13-08-98, new methods SetBining() PrintInfo()</span>
00043 <span class="comment">// 03-08-01, new methods Store/Retrieve PhysicsTable (mma)</span>
00044 <span class="comment">// 06-08-01, BuildThePhysicsTable() called from constructor (mma)</span>
00045 <span class="comment">// 19-09-01, come back to previous ProcessName: "conv"</span>
00046 <span class="comment">// 20-09-01, DoIt: fminimalEnergy = 1*eV (mma) </span>
00047 <span class="comment">// 01-10-01, come back to BuildPhysicsTable(const G4ParticleDefinition&amp;)    </span>
00048 <span class="comment">// -----------------------------------------------------------------------------</span>
00049 
00050 <span class="comment">// class description</span>
00051 <span class="comment">//</span>
00052 <span class="comment">// gamma ---&gt; e+ e- </span>
00053 <span class="comment">// inherit from G4VDiscreteProcess</span>
00054 <span class="comment">//</span>
00055 
00056 <span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span>
00057 <span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span>
00058 
00059 <span class="preprocessor">#ifndef BDSGammaConversion_h</span>
00060 <span class="preprocessor"></span><span class="preprocessor">#define BDSGammaConversion_h 1</span>
00061 <span class="preprocessor"></span>
00062 <span class="preprocessor">#include "BDSGlobalConstants.hh"</span>
00063 
00064 <span class="preprocessor">#include "G4ios.hh"</span> 
00065 <span class="preprocessor">#include "globals.hh"</span>
00066 <span class="preprocessor">#include "Randomize.hh"</span> 
00067 <span class="preprocessor">#include "G4VDiscreteProcess.hh"</span>
00068 <span class="preprocessor">#include "G4PhysicsTable.hh"</span>
00069 <span class="preprocessor">#include "G4PhysicsLogVector.hh"</span>
00070 <span class="preprocessor">#include "G4Element.hh"</span>
00071 <span class="preprocessor">#include "G4Gamma.hh"</span> 
00072 <span class="preprocessor">#include "G4Electron.hh"</span>
00073 <span class="preprocessor">#include "G4Positron.hh"</span>
00074 <span class="preprocessor">#include "G4Step.hh"</span>
00075 
00076 <span class="preprocessor">#include "BDSConvParticleChange.hh"</span>
00077 <span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span>
00078  
00079 <span class="keyword">class </span>BDSGammaConversion : <span class="keyword">public</span> G4VDiscreteProcess
00080  
00081 {  
00082 <span class="keyword">public</span>:  <span class="comment">// with description</span>
00083  
00084   BDSGammaConversion(<span class="keyword">const</span> G4String&amp; processName =<span class="stringliteral">"BDSconv"</span>);
00085   
00086   ~BDSGammaConversion();
00087   
00088   G4bool IsApplicable(<span class="keyword">const</span> G4ParticleDefinition&amp;);
00089   <span class="comment">// true for Gamma only.</span>
00090   
00091   <span class="keywordtype">void</span> SetPhysicsTableBining(G4double lowE, G4double highE, G4int nBins);
00092   <span class="comment">// Allows to define the binning of the PhysicsTables, </span>
00093   <span class="comment">// before to build them.</span>
00094   
00095   <span class="keywordtype">void</span> BuildPhysicsTable(<span class="keyword">const</span> G4ParticleDefinition&amp;);
00096   <span class="comment">// It builds the total CrossSectionPerAtom table, for Gamma,</span>
00097   <span class="comment">// and for every element contained in the elementTable.</span>
00098   <span class="comment">// It builds the MeanFreePath table, for Gamma,</span>
00099   <span class="comment">// and for every material contained in the materialTable.       </span>
00100   
00101   G4bool StorePhysicsTable(G4ParticleDefinition* ,
00102                            <span class="keyword">const</span> G4String&amp; directory, G4bool);
00103   <span class="comment">// store CrossSection and MeanFreePath tables into an external file</span>
00104   <span class="comment">// specified by 'directory' (must exist before invokation)</span>
00105   
00106   G4bool RetrievePhysicsTable(G4ParticleDefinition* ,
00107                               <span class="keyword">const</span> G4String&amp; directory, G4bool);
00108   <span class="comment">// retrieve CrossSection and MeanFreePath tables from an external file</span>
00109   <span class="comment">// specified by 'directory' </span>
00110   
00111   <span class="keywordtype">void</span> PrintInfoDefinition();
00112   <span class="comment">// Print few lines of informations about the process: validity range,</span>
00113   <span class="comment">// origine ..etc..</span>
00114   <span class="comment">// Invoked by BuildThePhysicsTable(). </span>
00115   
00116   G4double GetMeanFreePath(<span class="keyword">const</span> G4Track&amp; aTrack,
00117                            G4double previousStepSize,
00118                            G4ForceCondition* condition);
00119   <span class="comment">// It returns the MeanFreePath of the process for the current track :</span>
00120   <span class="comment">// (energy, material)</span>
00121   <span class="comment">// The previousStepSize and G4ForceCondition* are not used.</span>
00122   <span class="comment">// This function overloads a virtual function of the base class.      </span>
00123   <span class="comment">// It is invoked by the ProcessManager of the Particle.</span>
00124   
00125   G4double GetCrossSectionPerAtom(<span class="keyword">const</span> G4DynamicParticle* aDynamicGamma,
00126                                   G4Element*         anElement);
00127   <span class="comment">// It returns the total CrossSectionPerAtom of the process, </span>
00128   <span class="comment">// for the current DynamicGamma (energy), in anElement.       </span>
00129   
00130   G4VParticleChange* PostStepDoIt(<span class="keyword">const</span> G4Track&amp; aTrack,
00131                                   <span class="keyword">const</span> G4Step&amp; aStep);
00132   <span class="comment">// It computes the final state of the process (at end of step),</span>
00133   <span class="comment">// returned as a ParticleChange object.                           </span>
00134   <span class="comment">// This function overloads a virtual function of the base class.</span>
00135   <span class="comment">// It is invoked by the ProcessManager of the Particle.</span>
00136   
00137     
00138     <span class="keyword">protected</span>:
00139   
00140   <span class="keyword">virtual</span> G4double ComputeCrossSectionPerAtom(G4double GammaEnergy, 
00141                                               G4double AtomicNumber);
00142   
00143   <span class="keyword">virtual</span> G4double ComputeMeanFreePath (G4double GammaEnergy, 
00144                                         G4Material* aMaterial);
00145   
00146   <span class="keyword">virtual</span> G4double ComputeMuonMeanFreePath(G4double GammaEnergy, 
00147                                            G4Material* aMaterial);
00148 
00149   G4double GetMuonConversionCrossSection();
00150   G4double ComputeMuonCrossSectionPerAtom(
00151                                           G4double Egam, 
00152                                           G4double Z, G4double A);
00153 
00154 <span class="keyword">private</span>:
00155   
00156   G4Element* SelectRandomAtom(<span class="keyword">const</span> G4DynamicParticle* aDynamicGamma,
00157                               G4Material* aMaterial);
00158   
00159   G4double ScreenFunction1(G4double ScreenVariable);
00160   
00161   G4double ScreenFunction2(G4double ScreenVariable);
00162   
00163 <span class="keyword">private</span>:
00164   
00165      <span class="comment">// hide assignment operator as private </span>
00166   BDSGammaConversion&amp; operator=(<span class="keyword">const</span> BDSGammaConversion &amp;right);
00167   BDSGammaConversion(<span class="keyword">const</span> BDSGammaConversion&amp; );
00168   
00169 <span class="keyword">private</span>:
00170   
00171   G4PhysicsTable* theCrossSectionTable;    <span class="comment">// table for crossection</span>
00172   G4PhysicsTable* theMeanFreePathTable;
00173   
00174   G4double LowestEnergyLimit ;     <span class="comment">// low  energy limit of the tables</span>
00175   G4double HighestEnergyLimit ;    <span class="comment">// high energy limit of the tables </span>
00176   G4int NumbBinTable ;             <span class="comment">// number of bins in the tables</span>
00177   
00178   G4double fminimalEnergy;         <span class="comment">// minimalEnergy of produced particles</span>
00179   
00180   G4double MeanFreePath;           <span class="comment">// actual MeanFreePath (current medium)</span>
00181   G4double muonWeight;
00182   
00183 
00184   BDSConvParticleChange fParticleChange;
00185 };
00186 
00187 <span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span>
00188 
00189 <span class="preprocessor">#include "BDSGammaConversion.icc"</span>
00190   
00191 <span class="preprocessor">#endif</span>
00192 <span class="preprocessor"></span> 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 1 13:36:35 2004 for BDS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
