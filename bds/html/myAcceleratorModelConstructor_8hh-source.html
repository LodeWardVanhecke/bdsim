<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BDS: include/hideCode/myAcceleratorModelConstructor.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">hideCode</a></div>
<h1>myAcceleratorModelConstructor.hh</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * Merlin C++ Class Library for Charged Particle Accelerator Simulations</span>
00003 <span class="comment"> * </span>
00004 <span class="comment"> * Class library version 2.0 (1999)</span>
00005 <span class="comment"> * </span>
00006 <span class="comment"> * file AcceleratorModel\AdvancedModel\AcceleratorModelConstructor.h</span>
00007 <span class="comment"> * last modified 26/06/00 16:28:02</span>
00008 <span class="comment"> */</span>
00009 
00010 <span class="comment">/*</span>
00011 <span class="comment"> * This file is derived from software bearing the following</span>
00012 <span class="comment"> * restrictions:</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * MERLIN C++ class library for </span>
00015 <span class="comment"> * Charge Particle Accelerator Simulations</span>
00016 <span class="comment"> * Copyright (c) 1999 by N.J.Walker.  ALL RIGHTS RESERVED. </span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * Permission to use, copy, modify, distribute and sell this</span>
00019 <span class="comment"> * software and its documentation for any purpose is hereby</span>
00020 <span class="comment"> * granted without fee, provided that the above copyright notice</span>
00021 <span class="comment"> * appear in all copies and that both that copyright notice and</span>
00022 <span class="comment"> * this permission notice appear in supporting documentation.</span>
00023 <span class="comment"> * No representations about the suitability of this software for</span>
00024 <span class="comment"> * any purpose is made. It is provided "as is" without express</span>
00025 <span class="comment"> * or implied warranty.</span>
00026 <span class="comment"> */</span>
00027 
00028 
00029 <span class="preprocessor">#ifndef myAcceleratorModelConstructor_h</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define myAcceleratorModelConstructor_h 1</span>
00031 <span class="preprocessor"></span>
00032 <span class="comment">//#include "merlin_config.h"</span>
00033 
00034 <span class="preprocessor">#include &lt;stack&gt;</span>
00035 
00036 <span class="comment">// AcceleratorModel</span>
00037 <span class="preprocessor">#include "myAcceleratorModel.hh"</span>
00038 <span class="comment">// TComponentFrame</span>
00039 <span class="comment">//#include "AcceleratorModel/ComplexGeometry/TComponentFrame.h"</span>
00040 <span class="comment">//#include "myComponentFrame.hh"</span>
00041 
00042 <span class="comment">//class SequenceFrame;</span>
00043 
00044 <span class="comment">//      Responsible for constructing an AcceleratorModel object.</span>
00045 <span class="comment">//      The nested frame hierachy is constructed internally</span>
00046 <span class="comment">//      using a frame stack: each call to NewFrame(aFrame)</span>
00047 <span class="comment">//      pushes the current frame onto the stack, and makes the</span>
00048 <span class="comment">//      new frame the current frame. A subsequent call to End</span>
00049 <span class="comment">//      Frame(aFrame) causes the current frame (aFrame) to be</span>
00050 <span class="comment">//      popped from the stack. At any time between calls to New</span>
00051 <span class="comment">//      Frame and EndFrame can AppendComponent be called.</span>
00052 
00053 <span class="keyword">class </span>myAcceleratorModelConstructor 
00054 {
00055   <span class="keyword">public</span>:
00056       myAcceleratorModelConstructor ();
00057 
00058       ~myAcceleratorModelConstructor ();
00059 
00060       <span class="comment">//        Initialises a new myAcceleratorModel. Must be called</span>
00061       <span class="comment">//        before any subsequent constructor calls.</span>
00062       <span class="keywordtype">void</span> NewModel ();
00063 
00064       <span class="comment">//        Ends the current model construction and returns the</span>
00065       <span class="comment">//        model. The model must be in a valid (complete) state.</span>
00066       myAcceleratorModel* GetModel ();
00067 
00068       <span class="comment">//        Begin construction of a new LatticeFrame.</span>
00069   <span class="comment">// gab:</span>
00070   <span class="comment">//      void NewFrame (SequenceFrame&amp; aFrame);</span>
00071       <span class="keywordtype">void</span> NewFrame (myComponentFrame&amp; aFrame);
00072 
00073       <span class="comment">//        Finish construction of the specified frame. aFrame must</span>
00074       <span class="comment">//        match the current stack frame.</span>
00075   <span class="comment">//      void EndFrame (SequenceFrame&amp; aFrame);</span>
00076       <span class="keywordtype">void</span> EndFrame (myComponentFrame&amp; aFrame);
00077 
00078       <span class="comment">//        Append the specified component a distance d meters</span>
00079       <span class="comment">//        downstream of the last component.</span>
00080       <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> AppendComponent (T&amp; acc, <span class="keywordtype">double</span> d = 0)
00081       {
00082                 <span class="keywordflow">if</span>(d!=0) 
00083                         AppendDrift(d);
00084                 <span class="comment">// gab:</span>
00085                 <span class="comment">//     AppendComponentFrame(new TComponentFrame&lt;T&gt;(acc));</span>
00086                 AppendComponentFrame(<span class="keyword">new</span> myComponentFrame&lt;T&gt;(acc));
00087       }
00088 
00089       <span class="comment">//        Returns a reference to the current frame.</span>
00090       SequenceFrame&amp; GetCurrentFrame ()
00091       {
00092                 <span class="keywordflow">return</span> *(frameStack.top());
00093       }
00094 
00095       <span class="comment">//        Returns the depth of the current frame. 0 refers to the</span>
00096       <span class="comment">//        global frame (top level).</span>
00097       <span class="keywordtype">int</span> GetCurrentFrameDepth ()<span class="keyword"> const</span>
00098 <span class="keyword">      </span>{
00099                 <span class="keywordflow">return</span> frameStack.size()-1;
00100       }
00101 
00102       <span class="comment">//        Appends a simple drift to the current model.</span>
00103       <span class="keywordtype">void</span> AppendDrift (<span class="keywordtype">double</span> d);
00104 
00105       <span class="comment">//        Prints a table to os  containing statistics on the type</span>
00106       <span class="comment">//        and number of ModelElement current contained in the</span>
00107       <span class="comment">//        model.</span>
00108       <span class="keywordtype">void</span> ReportStatistics (std::ostream&amp; os) <span class="keyword">const</span>;
00109 
00110   <span class="keyword">protected</span>:
00111   <span class="keyword">private</span>:
00112     <span class="comment">// Data Members for Associations</span>
00113 
00114       myAcceleratorModel* currentModel;
00115 
00116   <span class="keyword">private</span>: 
00117 
00118       <span class="keywordtype">void</span> AppendComponentFrame (ComponentFrame* cf);
00119 
00120     <span class="comment">// Data Members for Associations</span>
00121 
00122       std::stack&lt; SequenceFrame* &gt; frameStack;
00123 };
00124 
00125 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 1 13:36:40 2004 for BDS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
