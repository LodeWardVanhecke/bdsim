<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BDS: include/hideCode/myComponentFrame.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">hideCode</a></div>
<h1>myComponentFrame.hh</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * Merlin C++ Class Library for Charged Particle Accelerator Simulations</span>
00003 <span class="comment"> * </span>
00004 <span class="comment"> * Class library version 2.0 (1999)</span>
00005 <span class="comment"> * </span>
00006 <span class="comment"> * file Merlin\AcceleratorModel\ComplexGeometry\myComponentFrame.h</span>
00007 <span class="comment"> * last modified 07/12/00 12:49:47</span>
00008 <span class="comment"> */</span>
00009 
00010 <span class="comment">/*</span>
00011 <span class="comment"> * This file is derived from software bearing the following</span>
00012 <span class="comment"> * restrictions:</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * MERLIN C++ class library for </span>
00015 <span class="comment"> * Charge Particle Accelerator Simulations</span>
00016 <span class="comment"> * Copyright (c) 1999 by N.J.Walker.  ALL RIGHTS RESERVED. </span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * Permission to use, copy, modify, distribute and sell this</span>
00019 <span class="comment"> * software and its documentation for any purpose is hereby</span>
00020 <span class="comment"> * granted without fee, provided that the above copyright notice</span>
00021 <span class="comment"> * appear in all copies and that both that copyright notice and</span>
00022 <span class="comment"> * this permission notice appear in supporting documentation.</span>
00023 <span class="comment"> * No representations about the suitability of this software for</span>
00024 <span class="comment"> * any purpose is made. It is provided "as is" without express</span>
00025 <span class="comment"> * or implied warranty.</span>
00026 <span class="comment"> */</span>
00027 
00028 <span class="preprocessor">#ifndef myComponentFrame_h</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define myComponentFrame_h 1</span>
00030 <span class="preprocessor"></span>
00031 <span class="comment">//#include "merlin_config.h"</span>
00032 
00033 <span class="comment">// myAcceleratorComponent</span>
00034 <span class="preprocessor">#include "myAcceleratorComponent.hh"</span>
00035 <span class="comment">// TransformableFrame</span>
00036 <span class="comment">// gab:</span>
00037 <span class="comment">//#include "AcceleratorModel/ComplexGeometry/TransformableFrame.h"</span>
00038 
00039 <span class="comment">// gab:</span>
00040 <span class="keyword">class </span>myComponentFrame 
00041 <span class="comment">//: public TransformableFrame  </span>
00042 {
00043   <span class="keyword">public</span>:
00044     <span class="keyword">class </span>CachedT 
00045     {
00046       <span class="keyword">public</span>:
00047         <span class="comment">// Data Members for Class Attributes</span>
00048 
00049       <span class="comment">// gab:</span>
00050       <span class="comment">//          Transform3D in_T;</span>
00051       <span class="comment">//          Transform3D out_T;</span>
00052 
00053       <span class="keyword">protected</span>:
00054       <span class="keyword">private</span>:
00055       <span class="keyword">private</span>:  
00056     };
00057 
00058   <span class="keyword">public</span>:
00059       <span class="comment">//        Constructor taking the associated myAcceleratorComponent</span>
00060       <span class="comment">//        object.</span>
00061       <span class="keyword">explicit</span> myComponentFrame (myAcceleratorComponent&amp; ac, <span class="keyword">const</span> string&amp; <span class="keywordtype">id</span> = <span class="stringliteral">""</span>);
00062 
00063       <span class="comment">//        Copy constructor.</span>
00064       myComponentFrame (<span class="keyword">const</span> myComponentFrame&amp; rhs);
00065 
00066       <span class="keyword">virtual</span> ~myComponentFrame ();
00067 
00068 
00069       <span class="comment">//        Copy assignment.</span>
00070       <span class="keyword">const</span> myComponentFrame&amp; operator = (<span class="keyword">const</span> myComponentFrame&amp; rhs);
00071 
00072       myAcceleratorComponent&amp; GetComponent ();
00073 
00074       <span class="keyword">const</span> myAcceleratorComponent&amp; GetComponent () <span class="keyword">const</span>;
00075 
00076       <span class="comment">//        Return the three-dimensional transformation between the</span>
00077       <span class="comment">//        local frame at s1 and the local frame at s2. s1 and s2</span>
00078       <span class="comment">//        are in the local s frame, and must be within the</span>
00079       <span class="comment">//        geometry extents.</span>
00080   <span class="comment">// gab:</span>
00081   <span class="comment">//      virtual Transform3D GetTransform (double s1, double s2) const throw (BeyondExtent);</span>
00082 
00083       <span class="comment">//        Returns the total transformation, i.e. the</span>
00084       <span class="comment">//        transformation from the local entrance frame to the</span>
00085       <span class="comment">//        local exit frame.</span>
00086   <span class="comment">// gab:</span>
00087   <span class="comment">//      virtual Transform3D GetTotalTransform () const;</span>
00088 
00089       <span class="comment">//        Returns the local extent of this geometry.</span>
00090   <span class="comment">//      virtual AcceleratorGeometry::Extent GetLocalExtent () const;</span>
00091 
00092       <span class="comment">//        Returns the total arc-length of the geometry.</span>
00093       <span class="keyword">virtual</span> <span class="keywordtype">double</span> GetLength () <span class="keyword">const</span>;
00094 
00095       <span class="comment">//        Should never be called for this class.</span>
00096       <span class="keyword">virtual</span> <span class="keywordtype">void</span> ReplaceSubFrame (LatticeFrame&amp; oldf, LatticeFrame&amp; newf);
00097 
00098       <span class="comment">//        Returns false.</span>
00099       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasSubFrames () <span class="keyword">const</span>;
00100 
00101       <span class="comment">//        Returns false;</span>
00102       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsEntrSubFrame (<span class="keyword">const</span> LatticeFrame&amp; aSubFrame) <span class="keyword">const</span>;
00103 
00104       <span class="comment">//        Returns false.</span>
00105       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsExitSubFrame (<span class="keyword">const</span> LatticeFrame&amp; aSubFrame) <span class="keyword">const</span>;
00106 
00107       <span class="comment">//        Returns false.</span>
00108       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsSubFrame (<span class="keyword">const</span> LatticeFrame&amp; aFrame) <span class="keyword">const</span>;
00109 
00110       <span class="comment">//        Causes any cached state to be invalidated. The cached</span>
00111       <span class="comment">//        state should be re-calculated if and when required.</span>
00112       <span class="keyword">virtual</span> <span class="keywordtype">void</span> Invalidate () <span class="keyword">const</span>;
00113 
00114       <span class="comment">//        Returns the entrance transformation for this frame,</span>
00115       <span class="comment">//        including the effects of all nested frame boundaries at</span>
00116       <span class="comment">//        this location.</span>
00117   <span class="comment">// gab:</span>
00118   <span class="comment">// virtual Transform3D GetEntrTransform () const;</span>
00119 
00120       <span class="comment">//        Returns the exit transformation for this frame,</span>
00121       <span class="comment">//        including the effects of all nested frame boundaries at</span>
00122       <span class="comment">//        this location.</span>
00123   <span class="comment">// gab:</span>
00124   <span class="comment">//  virtual Transform3D GetExitTransform () const;</span>
00125 
00126       myAcceleratorComponent* operator -&gt; ();
00127 
00128       <span class="keyword">const</span> myAcceleratorComponent* operator -&gt; () <span class="keyword">const</span>;
00129 
00130       <span class="comment">//        Returns a copy of this myComponentFrame. Note that only</span>
00131       <span class="comment">//        the reference to the myAcceleratorComponent is copied, not</span>
00132       <span class="comment">//        the myAcceleratorComponent itself.</span>
00133       <span class="keyword">virtual</span> myModelElement* Copy () <span class="keyword">const</span>;
00134 
00135       <span class="comment">//        Return the name of the element. Returns the name of the</span>
00136       <span class="comment">//        myAcceleratorComponent if the label for this frame has not</span>
00137       <span class="comment">//        been explicitely set.</span>
00138       <span class="keyword">virtual</span> <span class="keyword">const</span> string&amp; GetName () <span class="keyword">const</span>;
00139 
00140       <span class="comment">//        Returns the type of the referenced myAcceleratorComponent.</span>
00141       <span class="keyword">virtual</span> <span class="keyword">const</span> string&amp; GetType () <span class="keyword">const</span>;
00142 
00143       <span class="comment">//        Returns the transformation from the local origin to the</span>
00144       <span class="comment">//        entrance plane.</span>
00145   <span class="comment">//gab:</span>
00146   <span class="comment">//      virtual Transform3D GetOriginToEntrTransform () const;</span>
00147 
00148       <span class="comment">//        Returns the transformation from the local origin to the</span>
00149       <span class="comment">//        exit plane.</span>
00150   <span class="comment">// gab:</span>
00151   <span class="comment">//      virtual Transform3D GetOriginToExitTransform () const;</span>
00152 
00153     <span class="comment">// Data Members for Class Attributes</span>
00154 
00155       <span class="comment">//        Set to true if entrance and exit transformations are to</span>
00156       <span class="comment">//        be cached.</span>
00157 
00158       <span class="keyword">static</span> <span class="keywordtype">bool</span> cacheTransforms;
00159 
00160 
00161   <span class="keyword">protected</span>:
00162     <span class="comment">// Data Members for Associations</span>
00163 
00164       myAcceleratorComponent* theComponent;
00165 
00166   <span class="keyword">private</span>:
00167   <span class="keyword">private</span>:  
00168 
00169       <span class="keywordtype">void</span> UpdateCachedT () <span class="keyword">const</span>;
00170 
00171     <span class="comment">// Data Members for Associations</span>
00172       <span class="keyword">mutable</span> CachedT* cached_t;
00173 };
00174 
00175 <span class="comment">// Class myComponentFrame::CachedT </span>
00176 
00177 <span class="comment">// Class myComponentFrame </span>
00178 
00179 <span class="comment">// gab:</span>
00180 <span class="comment">//inline myComponentFrame::myComponentFrame (myAcceleratorComponent&amp; ac, const //string&amp; id)</span>
00181 <span class="comment">//  : TransformableFrame(id),theComponent(&amp;ac),cached_t(0)</span>
00182 <span class="comment">//{}</span>
00183 
00184 <span class="keyword">inline</span> myComponentFrame::myComponentFrame (<span class="keyword">const</span> myComponentFrame&amp; rhs)
00185   <span class="comment">// gab:</span>
00186   : theComponent(rhs.theComponent),cached_t(0)
00187   <span class="comment">//  : TransformableFrame(rhs),theComponent(rhs.theComponent),cached_t(0)</span>
00188 {}
00189 
00190 
00191 <span class="keyword">inline</span> myAcceleratorComponent&amp; myComponentFrame::GetComponent ()
00192 {
00193         <span class="keywordflow">return</span> *theComponent;
00194 }
00195 
00196 <span class="keyword">inline</span> <span class="keyword">const</span> myAcceleratorComponent&amp; myComponentFrame::GetComponent ()<span class="keyword"> const</span>
00197 <span class="keyword"></span>{
00198         <span class="keywordflow">return</span> *theComponent;
00199 }
00200 
00201 <span class="keyword">inline</span> myAcceleratorComponent* myComponentFrame::operator -&gt; ()
00202 {
00203         <span class="keywordflow">return</span> theComponent;
00204 }
00205 
00206 <span class="keyword">inline</span> <span class="keyword">const</span> myAcceleratorComponent* myComponentFrame::operator -&gt; ()<span class="keyword"> const</span>
00207 <span class="keyword"></span>{
00208         <span class="keywordflow">return</span> theComponent;
00209 }
00210 
00211 <span class="keyword">inline</span> <span class="keyword">const</span> string&amp; myComponentFrame::GetName ()<span class="keyword"> const</span>
00212 <span class="keyword"></span>{
00213   <span class="comment">// gab:</span>
00214   <span class="comment">//    const string&amp; id = TransformableFrame::GetName();</span>
00215         <span class="keywordflow">return</span> (<span class="keywordtype">id</span>.length()!=0)? <span class="keywordtype">id</span> : (theComponent-&gt;GetName());
00216 }
00217 
00218 
00219 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 1 13:36:40 2004 for BDS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
