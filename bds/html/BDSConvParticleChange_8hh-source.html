<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BDS: include/BDSConvParticleChange.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a></div>
<h1>BDSConvParticleChange.hh</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/* BDSIM code.    Version 1.0</span>
00002 <span class="comment">   Author: Grahame A. Blair, Royal Holloway, Univ. of London.</span>
00003 <span class="comment">   Last modified 3.11.2002</span>
00004 <span class="comment">   Copyright (c) 2002 by G.A.Blair.  ALL RIGHTS RESERVED. </span>
00005 <span class="comment">*/</span>
00006 <span class="comment">//</span>
00007 <span class="comment">// ********************************************************************</span>
00008 <span class="comment">// * DISCLAIMER                                                       *</span>
00009 <span class="comment">// *                                                                  *</span>
00010 <span class="comment">// * The following disclaimer summarizes all the specific disclaimers *</span>
00011 <span class="comment">// * of contributors to this software. The specific disclaimers,which *</span>
00012 <span class="comment">// * govern, are listed with their locations in:                      *</span>
00013 <span class="comment">// *   http://cern.ch/geant4/license                                  *</span>
00014 <span class="comment">// *                                                                  *</span>
00015 <span class="comment">// * Neither the authors of this software system, nor their employing *</span>
00016 <span class="comment">// * institutes,nor the agencies providing financial support for this *</span>
00017 <span class="comment">// * work  make  any representation or  warranty, express or implied, *</span>
00018 <span class="comment">// * regarding  this  software system or assume any liability for its *</span>
00019 <span class="comment">// * use.                                                             *</span>
00020 <span class="comment">// *                                                                  *</span>
00021 <span class="comment">// * This  code  implementation is the  intellectual property  of the *</span>
00022 <span class="comment">// * GEANT4 collaboration.                                            *</span>
00023 <span class="comment">// * By copying,  distributing  or modifying the Program (or any work *</span>
00024 <span class="comment">// * based  on  the Program)  you indicate  your  acceptance of  this *</span>
00025 <span class="comment">// * statement, and all its terms.                                    *</span>
00026 <span class="comment">// ********************************************************************</span>
00027 <span class="comment">//</span>
00028 <span class="comment">//</span>
00029 <span class="comment">// $Id: BDSConvParticleChange.hh,v 1.1.1.1 2004/11/18 17:42:40 ilia Exp $</span>
00030 <span class="comment">// GEANT4 tag $Name:  $</span>
00031 <span class="comment">//</span>
00032 <span class="comment">// </span>
00033 <span class="comment">// ------------------------------------------------------------</span>
00034 <span class="comment">//      GEANT 4 class header file </span>
00035 <span class="comment">//</span>
00036 <span class="comment">// </span>
00037 <span class="comment">// ------------------------------------------------------------</span>
00038 <span class="comment">//   Implemented for the new scheme                 23 Mar. 1998  H.Kurahige</span>
00039 <span class="comment">//</span>
00040 <span class="comment">// Class Description</span>
00041 <span class="comment">//  This class is a concrete class for ParticleChange which</span>
00042 <span class="comment">//  has all functionality in old scheme.</span>
00043 <span class="comment">//-</span>
00044 <span class="comment">//  This class contains the results after invocation of a physics process.</span>
00045 <span class="comment">//  This includes final states of parent particle (momentum, energy,</span>
00046 <span class="comment">//  etc) and secondary particles generated by the interaction.</span>
00047 <span class="comment">//  The tracking assumes that all the values of energy and</span>
00048 <span class="comment">//  momentum are in global reference system, therefore all the</span>
00049 <span class="comment">//  needed Lorentz transformations must have been already Done</span>
00050 <span class="comment">//  when filling the data-members of this class.</span>
00051 <span class="comment">//-</span>
00052 <span class="comment">//  ---------------------------------------------------------------</span>
00053 <span class="comment">//  IMPORTANT NOTE: Although the name of the class and methods are</span>
00054 <span class="comment">//   "Change", what it stores (and returns in get) are the "FINAL" </span>
00055 <span class="comment">//   values of the Position, Momentum, etc.</span>
00056 <span class="comment">// </span>
00057 <span class="comment">//  ------------------------------------------------------------</span>
00058 <span class="comment">//  modify AddSecondary methods for "GoodForTracking" flag </span>
00059 <span class="comment">//                                                 8 June 1998 H.Kurashige</span>
00060 <span class="comment">//   Add Track weight                              12 Nov. 1998  H.Kurashige</span>
00061 <span class="comment">//   Add Get/SetMomentumDirectionChange             6 Feb. 1999 H.Kurashige </span>
00062 <span class="comment">//   Add get/SetDynamicMass                        5 Oct. 1999 H.Kurashige</span>
00063 <span class="comment">//   Add get/SetDynamicCharge                       5 Oct. 1999 H.Kurashige</span>
00064 <span class="comment">// -------------------------------------------------------------</span>
00065  
00066 <span class="preprocessor">#ifndef BDSConvParticleChange_h</span>
00067 <span class="preprocessor"></span><span class="preprocessor">#define BDSConvParticleChange_h 1</span>
00068 <span class="preprocessor"></span>
00069 <span class="preprocessor">#include "globals.hh"</span>
00070 <span class="preprocessor">#include "G4ios.hh"</span>
00071 <span class="preprocessor">#include "G4ThreeVector.hh"</span>
00072 <span class="preprocessor">#include "G4ThreeVector.hh"</span>
00073 <span class="keyword">class </span>G4DynamicParticle;
00074 <span class="preprocessor">#include "G4VParticleChange.hh"</span>
00075 
00076 <span class="keyword">class </span>BDSConvParticleChange: <span class="keyword">public</span> G4VParticleChange
00077 { 
00078   <span class="keyword">public</span>:
00079     <span class="comment">// default constructor</span>
00080     BDSConvParticleChange();
00081 <span class="comment">//    BDSConvParticleChange(G4bool useEB);</span>
00082 
00083     <span class="comment">// destructor</span>
00084     <span class="keyword">virtual</span> ~BDSConvParticleChange();
00085 
00086   <span class="keyword">protected</span>:
00087     <span class="comment">// hide copy constructor and assignment operaor as protected</span>
00088     BDSConvParticleChange(<span class="keyword">const</span> BDSConvParticleChange &amp;right);
00089     BDSConvParticleChange &amp; operator=(<span class="keyword">const</span> BDSConvParticleChange &amp;right);
00090 
00091   <span class="keyword">public</span>:
00092     <span class="comment">// equal/unequal operator</span>
00093     G4bool operator==(<span class="keyword">const</span> BDSConvParticleChange &amp;right) <span class="keyword">const</span>;
00094     G4bool operator!=(<span class="keyword">const</span> BDSConvParticleChange &amp;right) <span class="keyword">const</span>;
00095 
00096   <span class="keyword">public</span>: <span class="comment">// with description</span>
00097     <span class="comment">// ----------------------------------------------------</span>
00098     <span class="comment">// --- the following methods are for updating G4Step -----   </span>
00099     <span class="comment">// Return the pointer to the G4Step after updating the Step information</span>
00100     <span class="comment">// by using final state information of the track given by a physics</span>
00101     <span class="comment">// process    </span>
00102     <span class="keyword">virtual</span> G4Step* UpdateStepForAlongStep(G4Step* Step);
00103     <span class="comment">// A physics process gives the final state of the particle </span>
00104     <span class="comment">// relative to the initial state at the beginning of the Step,</span>
00105     <span class="comment">// i.e., based on information of G4Track (or equivalently </span>
00106     <span class="comment">// the PreStepPoint)</span>
00107     <span class="comment">// In this method, the differences (delta) between these two states </span>
00108     <span class="comment">// are calculated, and are accumulated in PostStepPoint.</span>
00109     <span class="comment">// Take note that the return type of GetMomentumChange is a</span>
00110     <span class="comment">// pointer to G4ParticleMometum. Also it is a normalized </span>
00111     <span class="comment">// momentum vector.</span>
00112     <span class="keyword">virtual</span> G4Step* UpdateStepForAtRest(G4Step* Step);
00113     <span class="keyword">virtual</span> G4Step* UpdateStepForPostStep(G4Step* Step);
00114     <span class="comment">// A physics process gives the final state of the particle </span>
00115     <span class="comment">// based on information of G4Track (or equivalently the PreStepPoint)</span>
00116  
00117     <span class="keyword">virtual</span> <span class="keywordtype">void</span> Initialize(<span class="keyword">const</span> G4Track&amp;);
00118     <span class="comment">// Initialize all propoerties by using G4Track information</span>
00119 
00120 
00121   <span class="keywordtype">void</span> SetMuonWeight(G4double aMuonWeight);
00122 
00123   <span class="keyword">protected</span>: <span class="comment">// with description</span>
00124     G4Step* UpdateStepInfo(G4Step* Step);
00125     <span class="comment">//  Update the G4Step specific attributes </span>
00126     <span class="comment">//  (i.e. SteppingControl, LocalEnergyDeposit, and TrueStepLength)</span>
00127 
00128   <span class="keyword">public</span>:     <span class="comment">// with description</span>
00129     
00130     <span class="comment">// ----------------------------------------------------</span>
00131     <span class="comment">//--- methods to keep information of the final state--</span>
00132     <span class="comment">//  IMPORTANT NOTE: Although the name of the class and methods are</span>
00133     <span class="comment">//   "Change", what it stores (and returns in get) are the "FINAL" </span>
00134     <span class="comment">//   values of the Position, Momentum, etc.</span>
00135 
00136     <span class="keyword">const</span> G4ThreeVector* GetMomentumDirectionChange() <span class="keyword">const</span>;
00137     <span class="keywordtype">void</span> SetMomentumDirectionChange(G4double Px, G4double Py, G4double Pz);
00138     <span class="keywordtype">void</span> SetMomentumDirectionChange(<span class="keyword">const</span> G4ThreeVector&amp; Pfinal);
00139     <span class="keyword">const</span> G4ThreeVector* GetMomentumChange() <span class="keyword">const</span>;
00140     <span class="keywordtype">void</span> SetMomentumChange(G4double Px, G4double Py, G4double Pz);
00141     <span class="keywordtype">void</span> SetMomentumChange(<span class="keyword">const</span> G4ThreeVector&amp; Pfinal);
00142     <span class="comment">// Get/Set theMomentumDirectionChange vector: it is the final momentum direction.</span>
00143 
00144     <span class="keyword">const</span> G4ThreeVector* GetPolarizationChange() <span class="keyword">const</span>;
00145     <span class="keywordtype">void</span> SetPolarizationChange(G4double Px, G4double Py, G4double Pz);
00146     <span class="keywordtype">void</span> SetPolarizationChange(<span class="keyword">const</span> G4ThreeVector&amp; finalPoralization);
00147     <span class="comment">// Get/Set thePolarizationChange vector.</span>
00148 
00149     G4double GetEnergyChange() <span class="keyword">const</span>;
00150     <span class="keywordtype">void</span> SetEnergyChange(G4double theEnergyChange);
00151     <span class="comment">// Get/Set the final kinetic energy of the current particle.</span>
00152 
00153     G4double GetProperTimeChange() <span class="keyword">const</span>;
00154     <span class="keywordtype">void</span> SetProperTimeChange(G4double t);
00155     <span class="comment">//  Get/Set theProperTimeChange vector</span>
00156 
00157     <span class="keyword">const</span> G4ThreeVector* GetPositionChange() <span class="keyword">const</span>;
00158     <span class="keywordtype">void</span> SetPositionChange(G4double x, G4double y, G4double z);
00159     <span class="keywordtype">void</span> SetPositionChange(<span class="keyword">const</span> G4ThreeVector&amp; finalPosition);
00160     <span class="comment">//  Get/Set the final position of the current particle.</span>
00161 
00162     G4double GetTimeChange() <span class="keyword">const</span>;
00163     <span class="keywordtype">void</span> SetTimeChange(G4double t);
00164     <span class="comment">//  Get/Set theTimeChange vector.</span>
00165  
00166     G4double GetMassChange() <span class="keyword">const</span>;
00167     <span class="keywordtype">void</span> SetMassChange(G4double mass);
00168     <span class="comment">//   Get/Set theMassChange </span>
00169 
00170     G4double GetChargeChange() <span class="keyword">const</span>;
00171     <span class="keywordtype">void</span> SetChargeChange(G4double mass);
00172     <span class="comment">//   Get/Set theChargeChange </span>
00173   
00174     G4double GetWeightChange() <span class="keyword">const</span>;
00175     <span class="keywordtype">void</span> SetWeightChange(G4double w);
00176     <span class="comment">//   Get/Set theWeightChange </span>
00177 
00178     <span class="comment">//  -- Utility functions --</span>
00179     G4ThreeVector GetGlobalPosition(<span class="keyword">const</span> G4ThreeVector&amp; displacement) <span class="keyword">const</span>;
00180     <span class="comment">//  Convert the position displacement to the global position.</span>
00181 
00182     G4double GetGlobalTime(G4double timeDelay) <span class="keyword">const</span>;
00183     <span class="comment">//  Convert the time delay to the global time.</span>
00184 
00185     G4ThreeVector CalcMomentum(G4double           energy,
00186                                G4ThreeVector direction,
00187                                G4double           mass      ) <span class="keyword">const</span>;
00188     <span class="comment">//  Calculate momentum by using Energy, Momentum Direction, and Mass </span>
00189     <span class="comment">// ----------------------------------------------------</span>
00190 
00191 
00192     <span class="comment">// ----------------------------------------------------</span>
00193     <span class="comment">// --- methods for adding secondaries</span>
00194     <span class="keywordtype">void</span> AddSecondary(G4Track* aSecondary);
00195     <span class="comment">//  Add a secondary particle to theListOfSecondaries.</span>
00196 
00197     <span class="keywordtype">void</span> AddSecondary(G4DynamicParticle* aSecondary,
00198                       G4bool             IsGoodForTracking = <span class="keyword">false</span> );
00199     <span class="comment">//  Add a secondary particle to theListOfSecondaries.</span>
00200     <span class="comment">//  position and time are same as thePositionChange and theTimeChange </span>
00201 
00202     <span class="keywordtype">void</span> AddSecondary(G4DynamicParticle* aSecondary, 
00203                       G4ThreeVector      position,
00204                       G4bool             IsGoodForTracking = <span class="keyword">false</span>   );
00205     <span class="comment">//  Add a secondary particle to theListOfSecondaries.</span>
00206     <span class="comment">//  global time are same as theTimeChange and theTimeChange </span>
00207 
00208     <span class="keywordtype">void</span> AddSecondary(G4DynamicParticle* aSecondary, 
00209                       G4double           time,
00210                       G4bool             IsGoodForTracking = <span class="keyword">false</span> );
00211     <span class="comment">//  Add a secondary particle to theListOfSecondaries.</span>
00212     <span class="comment">//  position and are same as thePositionChange  </span>
00213     <span class="comment">// ----------------------------------------------------</span>
00214 
00215   <span class="keyword">public</span>:
00216     <span class="keyword">virtual</span> <span class="keywordtype">void</span> DumpInfo() <span class="keyword">const</span>;
00217 
00218   <span class="keyword">protected</span>:
00219     G4ThreeVector theMomentumDirectionChange;
00220     <span class="comment">//  It is the vector containing the final momentum direction</span>
00221     <span class="comment">//  after the invoked process. The application of the change</span>
00222     <span class="comment">//  of the momentum direction of the particle is not Done here.</span>
00223     <span class="comment">//  The responsibility to apply the change is up the entity</span>
00224     <span class="comment">//  which invoked the process.</span>
00225 
00226     G4ThreeVector thePolarizationChange;
00227     <span class="comment">//  The changed (final) polarization of a given track</span>
00228     
00229     G4double theEnergyChange;
00230     <span class="comment">//  The final kinetic energy of the current track</span>
00231     
00232     G4ThreeVector thePositionChange;
00233     <span class="comment">//  The changed (final) position of a given track</span>
00234     
00235     G4double theTimeChange;
00236     <span class="comment">//  The changed (final) global time of a given track</span>
00237     
00238     G4double theProperTimeChange;
00239     <span class="comment">//  The changed (final) proper time of a given track</span>
00240     
00241     G4double theWeightChange;
00242     <span class="comment">//  The Changed (final) weight of a given track</span>
00243 
00244     G4double theMassChange;
00245     <span class="comment">//  The Changed (final) mass of a given track</span>
00246 
00247     G4double theChargeChange;
00248     <span class="comment">//  The Changed (final) charge of a given track</span>
00249   
00250     <span class="keyword">const</span> G4Track* theCurrentTrack;
00251 
00252   G4double theMuonWeight;
00253 
00254   <span class="keyword">public</span>:
00255   <span class="comment">// these methods is used for switch on/off EB in all ParticleChange objects</span>
00256   <span class="comment">// static void SwOnAllEB();</span>
00257   <span class="comment">//  static void SwOffAllEB();</span>
00258 
00259   <span class="keyword">private</span>:
00260   <span class="comment">//  static G4bool fUseEBForAll;</span>
00261 
00262   <span class="keyword">public</span>:
00263     <span class="comment">// for Debug </span>
00264     <span class="keyword">virtual</span> G4bool CheckIt(<span class="keyword">const</span> G4Track&amp;);
00265 };
00266 
00267 <span class="preprocessor">#include "BDSConvParticleChange.icc"</span>
00268 
00269 <span class="preprocessor">#endif</span>
00270 <span class="preprocessor"></span>
00271 
00272 
00273 
00274 
00275 
00276 
00277 
00278 
00279 
00280 
00281 
00282 
00283 
00284 
00285 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 1 13:36:34 2004 for BDS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
