name=bdsim
G4TARGET=$(name)
G4EXLIB=true

G4BINDIR=@BINDIR
G4INSTALL=@G4INSTALL
ROOTSYS=@ROOTSYS

.PHONY: all
all: lib bin

ROOTLIBS=`$(ROOTSYS)/bin/root-config --libs`
ROOTCFLAGS=`$(ROOTSYS)/bin/root-config --cflags`

LDLIBS3 += $(ROOTLIBS)

# standard Geant4 make procedure
include $(G4INSTALL)/config/binmake.gmk

CPPFLAGS += -DG4VERSION=@G4VERSION -D@USE_ROOT
CPPFLAGS += -Df2cFortran
CPPFLAGS += $(ROOTCFLAGS)  
CPPFLAGS += -g -Wall $(ROOTINCS) -I.

LDFLAGS += -L$(G4LIBDIR) -L./parser -lgmad

install:

distrib:
	tar --ignore-failed-read -C .. -czvf BDSIM.tar.gz BDSIM/src BDSIM/include \
	BDSIM/bdsim.cc BDSIM/bdsimrun BDSIM/Makefile.in \
	BDSIM/configure BDSIM/README \
	BDSIM/parser/*.h BDSIM/examples \
	BDSIM/BDS_vis.mac BDSIM/gui.mac\
        BDSIM/docs BDSIM/parser \
	BDSIM/examples BDSIM/utils

docs:
	$(MAKE) -C docs
